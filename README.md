# Micromouse: Flood-Fill 기반 미로 탐색 로봇
Arduino Nano 33 BLE와 센서들을 활용하여 최단 경로를 찾아내고 엔코더 없이 주행 보정을 통해 미로를 탐색하는 마이크로마우스 프로젝트

1. 프로젝트 개요
  목적: 3분 이내에 칸당 20cm, 8*8 미로를 탐색하여 지도를 생성하고 목표 지점까지 주행

  기능: 
  -한 칸 전진 후 FloodFill 알고리즘을 통해 최적 경로를 계산
  -자이로 센서와 초음파 센서를 이용한 주행 오차 보정
  -컬러센서를 통해 목적지 도달 인식 후 정지

2. 시스템 구성
  Arduino Nano 33 BLE
  HC_SR04(초음파 센서) x 5, 컬러센서
  DC 모터 x 2
  6V AA 배터리팩

3. 로직 및 알고리즘
  -탐색 알고리즘은 Flood Fill을 채택, 매 전진 시 마다 지도를 업데이트하는 방식
  -가로 방향 벽, 새로 방향 벽을 각각 8*9 배열, 9*8 배열에 저장
  -중앙 4칸을 목표 지점 후보로 지정하여 cost를 0으로 설정, BFS 방식으로 cost를 계산하고 인접한 칸 중 cost
  가 가장 작은 칸으로 이동
  -엔코더가 없는 DC 모터의 한계를 좌우 2개의 초음파 센서의 거리 차이를 이용하여 벽과의 평행 유
  지, 전방 2칸 이내에 벽이 있을 경우 전방 벽과의 거리를 기반으로 1칸 전진하여 오차 누적 회피하
  는 방식으로 극복
  -양 쪽 모두 벽이 없는 경우 자이로 센서로 오차 보정

4. 핵심 함수 설명
   calculateFloodFill(): 큐 구조를 사용해 현재 알고 있는 벽을 고려한 최단 거리 계산
   moveOneCell(): 시간 기반 제어와 전방의 벽과의 거리 기반 제어를 병행하여 전진 시 오차 최소화
   updateWalls(): 한 칸 전진 할 때마다 5개의 초음파 센서로 지도의 벽 데이터 업데이트
   TurnTo(): 자이로 센서를 이용해 목표 각도까지 제자리 회전

5. 문제 해결 및 최적화
   초음파 센서 간격 문제: 센서 간격을 넓히면 측정이 정확해지지만, 차체가 커지기 때문에 회전 시
   문제 발생 가능성이 높아짐
   해결: 센서를 바퀴 축 근처로 배치하여 센서 간격을 최대화하되, 차체 크기를 최소화하여 회전 반
   경 확보

   시간 기반 전진 시 오차 문제: 전방 2칸 내에 벽이 없을 경우의 시간 기반 주행의 오차 범위가 너
   무 넓어짐
   해결: 각 칸에서 출발 시 초기에 속도에 보정 값을 더해 정지 마찰을 극복하여 속도가 더 일정하게
   유지되도록 함

   단일 방식 보정 문제: 한 쪽 벽을 바라보는 두 센서의 측정값의 차이만을 통해 오차를 보정하면 평
   행을 유지하지 못 함
   해결: 두 센서의 측정값의 차이 뿐만 아니라, 각 센서의 측정값이 최대 임곗값보다 크거나 최소 임
   값보다 작을 때에도 보정하여 차체가 벽과의 평행을 유지할 뿐만 아니라 한 쪽 벽과의 거리가 너무
   가깝거나 멀어지지 않도록 이중 보정 알고리즘 설

